version: 0.0.13
jobId: "987"
jobName: Workflow Details
jobType: Source Aligned Data Product
alias: load_workflowdetails
discoveryPort:
  name: Workflow Details
inputPorts:
  - alias: fpay_wflh_1
    isDynamic: true
    tableLocation: s3://msil-data-lake-curated/sr1/pay_de/fpay_wflh
    optional:
      persistDataFrame: false
      enableDataReconciliation: false
      enforceSchema: false
      connection: Online Safety S3 Connectivity
      dataSetUrn: urn:dv:dataset:1df3e9ea-f1a3-4bb6-8920-9ff47e72840a
      loggingOptions:
        printSchema: true
        count: true
        showData: true
    type: readDeltaTable
productState:
  isDynamic: true
  alias: load_workflowdetails
  retentionVersions: ""
  logicalSchema:
    properties:
      audit_id:
        type: STRING
        description: None
      audit_category:
        type: STRING
        description: None
      audit_type:
        type: STRING
        description: None
      location:
        type: STRING
        description: None
      ETL_Inserted_Date:
        type: STRING
        description: None
      ETL_Modified_Date:
        type: STRING
        description: None
      ETL_Created_By:
        type: STRING
        description: None
      ETL_Updated_By:
        type: STRING
        description: None
  stateStoreType: loadDataIceberg
  isProfilingEnabled: false
  updateStrategy: Overwrite
  tableName: msil_transformed_layer.Workflow_Details
  warehousePath: s3://msil-dataverse-safety/
  catalogName: glue
  optional:
    persistDataFrame: false
    enableDataReconciliation: false
    enforceSchema: false
    enforceSchemaMethod: Warning
    catalogType: glue
    loggingOptions:
      printSchema: true
      count: true
      showData: true
  refreshInterval: 0 5 * * *
transformation:
  - alias: query_workflowdetails
    type: SQL
    description: query_workflowdetails
    query: SELECT DISTINCT      wflh_request_id AS audit_id,     wflh_workflow_type
      AS audit_category,     wflh_action_taken AS
      audit_type,     wflh_action_date AS location,     current_date as
      ETL_Inserted_Date,   current_date as ETL_Modified_Date,   'Platform_admin'
      as ETL_Created_By,   'Platform_admin' as
      ETL_Updated_By   from  FROM      fpay_wflh WHERE      wflh_workflow_type =
      'SAFETYAUD'
    sequenceNo: 2
    references:
      - alias: fpay_wflh_1
        sqlReference: fpay_wflh
controlPort:
  dataQualityRules: {}
outputPort:
  subscriptionChannels:
    - channelType: Postgres
      queryType: SQL
    - channelType: Dataproduct
      queryType: SQL
